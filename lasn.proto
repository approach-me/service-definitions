syntax = "proto3";

option go_package = ".;protos";

package lasn;

message Empty {}

message LinkRequest {
  int64 user_id = 1;
  int64 nearby_user_id = 2;
}

message FetchRequest {
  int64 user_id = 1;
}

message UserSummary {
  int64 user_id = 1;
  string name = 2;
  string thumbnail_uri = 3;
}

message FetchResponse {
  repeated UserSummary user_summaries = 1;
}

message SubscribeRequest {
  int64 user_id = 1;
}

service LasnService {
  // Links two LASNs by connecting users in the request.
  rpc Link(LinkRequest) returns (Empty);

  // Retrieves the users in the user's LASN with matching filters.
  rpc Fetch(FetchRequest) returns (FetchResponse);

  // Subscribes to the receive updates on the LASN.
  rpc Subscribe(SubscribeRequest)
      returns (stream Empty);
}
